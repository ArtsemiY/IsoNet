
## Noise Generation
 
To improve signal-to-noise ratio of the missing wedge corrected tomogram, MWR can perform missing wedge correction and denoising simultaneously using an algorithm similar to the denoising autoencoder (1). 
 
To do so, missing wedge modulated gaussian noise is added to the input(X) sub-tomograms of the neural network, while the corresponding  target(y) sub-tomograms stay the same. During the training, the network will learn to remove those artificially added noise.
 
Those Gaussian noise volumes should be generated prior to the training step. Once you generated the noise volumes, you can use it across different project, as long as the cube size of the noise volumes and that of training sub-tomograms are the same. 

### Parameters
#### output_folder
The folder that stores the noise volumes in mrc format. This folder will be used as the **--noise_dir** option in the mwr training step
 
#### cubesize
The sizes of noise volumes have to be the same as subtomograms' in the training dataset (**--cube_size** option in the mwr training step). For neuron tomograms with a pixel size of 4.35A/pix, we typically use 64 for bin4 tomograms and 96 or 128 for bin2 tomograms.
 
#### number_volume, --start
Usually 1000 noise volumes are sufficient for the denoising. If the noise volumes are too few, the network might suffer from the overfitting. To append the new noise volumes to the already existing noise folder, you can specify the ‘start’ parameter when generate more noise volume.
The noise volumes are indexed from start to start + number_volume.
#### --mode
Two types of noise can be generated.
The first type (mode=1) noise is reconstructed by back-projection algorithm from 2d white noise images with minangle, maxangle and steps. The second (mode=2) is generated by applying 3d missing wedge filter to the 3d array of white noise.
Either type of the noise works well. We usually use the first type to correct the missing wedge for SIRT reconstruction, the second type for the WBP reconstructed tomograms.


```bash
%%bash
mwr_cli.py  generate_noise noise64 1000 64 --ncpus 20 
```

    Process is terminated.

